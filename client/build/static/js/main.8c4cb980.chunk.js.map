{"version":3,"sources":["pages/Register.jsx","pages/Login.jsx","services/authService.js","services/uploadService.js","firebase/index.js","services/getData.js","pages/Dashboard.jsx","components/LoginRoute.js","components/DashboardRoute.js","components/AdminRoute.js","pages/Admin.jsx","pages/Complaint-View-Dashboard.jsx","services/editComplaint.js","pages/Edit-Complaint.jsx","services/getReport.js","pages/Report.jsx","App.js","index.js"],"names":["Register","props","useState","userId","setUserId","userPassword","setUserPassword","key","setKey","e","a","bcrypt","hash","target","value","err","alert","type","register","fetch","method","body","JSON","stringify","id","password","headers","then","response","json","myJson","RESULT","flag","history","push","name","onChange","required","onClick","Login","login","login_response","error","localStorage","setItem","data","class","autocomplete","placeholder","getCurrentUser","parse","getItem","authHeader","user","token","requestValidation","authService","logoutUser","removeItem","validateUser","getCurrentUserPayload","jwt_decode","uploadComplaint","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","obj","getLocationData","getTransporterData","getComplaintData","getComplaintDataAdmin","Dashboard","React","locations","setLocations","transporters","setTransporters","useEffect","getData","data1","data2","getDropdown","complaintData","reportedBy","reportedDate","reportedLocation","description","vehicleNumber","transporterName","transporterCode","comments","imageUrl","imageArray","authorize","message","logout","upload","urlArray","forEach","image","ref","put","on","console","downloadUrl","child","getDownloadURL","url","resolve","x","length","handleClick","Date","viewComplaintsOnClick","disabled","selected","Object","entries","map","ele","str","substring","lastIndexOf","accept","multiple","files","LoginRoute","Component","component","rest","render","to","pathname","state","from","location","DashboardRoute","AdminRoute","Admin","query","counter","items","setItems","window","reload","y","w","String","split","arr","i","j","urlCounter","href","status","item","_id","createdOn","remarks","ComplaintView","display","log","changeData","EditComplaint","complaintId","newStatus","setNewStatus","newRemarks","setNewRemarks","getComplaint","editComplaint","sendData","updateComplaint","getReportData","Report","fromDate","setFromDate","toDate","setToDate","setData","csvReport","label","filename","getReport","complaints","checkFunction","App","exact","path","ComplaintViewDashboard","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8c4cb980.chunk.js","sourcesContent":["import React, { useState, Component } from 'react';\r\nimport bcrypt from 'bcryptjs';\r\n\r\n\r\nfunction Register(props){\r\n\r\n    const [userId, setUserId] = useState(\"\");\r\n    const [userPassword, setUserPassword] = useState(\"\");\r\n    const [key, setKey] = useState(\"\");\r\n    \r\n    function changeUserId (e) {\r\n        setUserId(e.target.value)\r\n    }\r\n\r\n    async function changeUserPassword (e) {\r\n        await bcrypt.hash(e.target.value, 10, (err, hash) => {\r\n            if(err) alert(err);\r\n            setUserPassword(hash);\r\n        })          \r\n    }\r\n\r\n    function changeKey (e) {\r\n      setKey(e.target.value)\r\n  }\r\n\r\n    async function onRegister(){\r\n      if (userId && userPassword) {\r\n        let type = \"\";\r\n        if(key===\"admin123\") type = \"ADMIN\";\r\n        else if(!key) type = \"VIEWER\" \r\n        else {\r\n          alert(\"Wrong Admin key\");\r\n          // throw new Error(\"WRONG ADMIN KEY ENTERED\");\r\n          return;\r\n        }\r\n\r\n        const register = async () => {\r\n          const RESULT = await fetch(\"/create_new_user\", {\r\n              method: \"POST\",\r\n              body: JSON.stringify({ id: userId, password: userPassword, type: type }),\r\n              headers: {\r\n                  \"Content-Type\": \"application/json\"\r\n              }\r\n          })\r\n           .then(response => { return response.json(); })\r\n           .then(myJson => { return myJson });\r\n          return(RESULT.flag);\r\n        }\r\n          if(await register()) {\r\n            alert(\"User Created!\");\r\n            props.history.push(\"/login\")\r\n          }\r\n          else alert(\"User already exists!\")\r\n      } else alert(\"Enter Details!!\")\r\n        \r\n    }\r\n\r\n    return(\r\n      <div>\r\n        <h2>Register...</h2>\r\n\r\n        <p>\r\n          <label>ID : <input type=\"text\" name=\"id\" onChange={changeUserId} required></input></label>\r\n        </p>\r\n        <p>\r\n          <label>Password : <input type=\"password\" name=\"password\" onChange={changeUserPassword} required></input></label>\r\n        </p>\r\n        <p>\r\n          <label>ADMIN Account Key : <input type=\"password\" name=\"password\" onChange={changeKey} required></input></label>\r\n        </p>\r\n        <button onClick={onRegister}>Register</button>\r\n        \r\n        \r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Register;","import React, { useState, Component } from 'react';\r\nimport {BrowserRouter as Router, Link, NavLink, Switch, Route, Redirect} from 'react-router-dom';\r\n\r\n\r\nfunction Login(props){\r\n\r\n    const [userId, setUserId] = useState(\"\");\r\n    const [userPassword, setUserPassword] = useState(\"\");\r\n    \r\n    function changeUserId (e) {\r\n        setUserId(e.target.value)\r\n    }\r\n\r\n    async function changeUserPassword (e) {\r\n        setUserPassword(e.target.value)        \r\n    }\r\n\r\n    async function onLogin() {\r\n        if (userId && userPassword) {\r\n            const login = async () => {\r\n                return fetch(\"/login_user\", {\r\n                    method: \"POST\",\r\n                    body: JSON.stringify({ id: userId, password: userPassword }),\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\"\r\n                    }\r\n                })\r\n                 .then(response => { return response.json(); })\r\n                 .then(myJson => { return myJson });\r\n            }\r\n            const login_response = await login();\r\n            \r\n            if(login_response.error === null) {\r\n                localStorage.setItem(\"user\", JSON.stringify(login_response.data));\r\n                props.history.push(\"/dashboard\")              \r\n            } else alert(\"Wrong Credentials!\\nTry Again\")\r\n        } else alert(\"Enter Details!!!\")        \r\n    }\r\n    return(\r\n        <div class=\"w-screen h-screen flex justify-center items-center \">\r\n\t\t<div class=\"p-10 bg-blue-100 rounded flex justify-center items-center flex-col shadow-md\" >\r\n\t\t\t<p class=\"mb-5 text-3xl uppercase text-blue-500\">Login</p>\r\n\t\t\t<input onChange={changeUserId} type=\"text\" name=\"email\" class=\"mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\" autocomplete=\"off\" placeholder=\"ID\" required />\r\n\t\t\t<input onChange={changeUserPassword} type=\"password\" name=\"password\" class=\"mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\" autocomplete=\"off\" placeholder=\"Password\" required />\r\n\t\t\t<button onClick={onLogin} class=\"bg-blue-600 hover:bg-gray-700 text-gray-50 font-bold p-2 rounded w-80\" id=\"login\" type=\"submit\"><span>Login</span></button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n        \r\n    )\r\n}\r\n\r\nexport default Login;","import jwt_decode from \"jwt-decode\"\r\n\r\nfunction logoutUser() {\r\n    localStorage.removeItem(\"user\");\r\n}\r\n\r\nfunction getCurrentUser() {\r\n    return JSON.parse(localStorage.getItem(\"user\"));\r\n}\r\n\r\nfunction authHeader() {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if(user && user.token){\r\n        return user.token \r\n    } else {\r\n        return null;\r\n    }\r\n}\r\nasync function validateUser() {\r\n    const requestValidation = () => fetch(\"/user_dashboard\",{\r\n        method: \"POST\",\r\n        headers: { \"x-access-token\": authHeader() }\r\n    })\r\n     .then(response => { return response.json(); })\r\n     .then(myJson => { return myJson })\r\n\r\n    return requestValidation();\r\n} \r\n\r\nfunction getCurrentUserPayload() {\r\n    let payload = \"\";\r\n    payload = (jwt_decode(getCurrentUser().token))\r\n    return payload;\r\n}\r\n\r\n\r\nconst authService = {\r\n    logoutUser,\r\n    getCurrentUser,\r\n    authHeader,\r\n    validateUser,\r\n    getCurrentUserPayload\r\n}\r\n\r\nexport default authService;","import authService from \"./authService\";\r\nconst uploadComplaint = async(data) => {\r\n    return fetch(\"/upload_complaint\",{\r\n        method: \"POST\",\r\n        headers: { \r\n            \"x-access-token\" : authService.authHeader(),\r\n            \"content-type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n     .then(response => { return response.json(); })\r\n     .then(myJson => { return myJson });\r\n}\r\n\r\nexport default uploadComplaint;","import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\n\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDK53Qu3U4_Ok2R5SpwpcpuVStvHq45OAg\",\r\n    authDomain: \"fir-react-upload-45c4f.firebaseapp.com\",\r\n    projectId: \"fir-react-upload-45c4f\",\r\n    storageBucket: \"fir-react-upload-45c4f.appspot.com\",\r\n    messagingSenderId: \"70025084606\",\r\n    appId: \"1:70025084606:web:cfad38249fb71752bf28ef\",\r\n    measurementId: \"G-DQ1Z7XJZES\"\r\n  };\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst storage = firebase.storage();\r\n\r\nexport { storage, firebase as default };","import authService from \"./authService\"\r\n\r\nconst getLocationData = async() => {\r\n    return fetch(\"/get_location_data\",{\r\n        method: \"POST\",\r\n        headers: {\r\n            \"x-access-token\" : authService.authHeader()\r\n        }\r\n    })\r\n     .then(response => { return response.json() })\r\n     .then(myJson => { return myJson });\r\n    // return locationData\r\n    \r\n}\r\n\r\nconst getTransporterData = async() => {\r\n    return fetch(\"/get_transporter_data\",{\r\n        method: \"POST\",\r\n        headers: {\r\n            \"x-access-token\" : authService.authHeader()\r\n        }\r\n    })\r\n     .then(response => { return response.json() })\r\n     .then(myJson => { return myJson });    \r\n}\r\n\r\nconst getComplaintData = async(flag) => {\r\n    const id = authService.getCurrentUserPayload().id;\r\n    return fetch(\"/get_complaint_data\",{\r\n        method: \"POST\",\r\n        body: JSON.stringify({flag,id}),\r\n        headers: {\r\n            \"x-access-token\": authService.authHeader(),\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n     .then(response => { return response.json(); })\r\n     .then(myJson => { return myJson });\r\n}\r\n\r\nconst getComplaintDataAdmin = async (flag) => {\r\n    return fetch(\"/get_complaint_data_admin\",{\r\n        method: \"POST\",\r\n        body: JSON.stringify(flag),\r\n        headers: {\r\n            \"x-access-token\": authService.authHeader(),\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n     .then(response => { return response.json() })\r\n     .then(myJson => { return myJson })\r\n}\r\n\r\n\r\n\r\nconst obj = {\r\n    getLocationData,\r\n    getTransporterData,\r\n    getComplaintData,\r\n    getComplaintDataAdmin\r\n}\r\n\r\nexport default obj;","import React from 'react';\r\nimport authService from '../services/authService';\r\nimport uploadComplaint from '../services/uploadService';\r\n\r\nimport { storage } from '../firebase/index';\r\nimport getData from '../services/getData';\r\n\r\n\r\n\r\nfunction Dashboard(props){\r\n    \r\n    const [locations, setLocations] = React.useState([{name: 'loading..'},{name: ''}])\r\n    const [transporters, setTransporters] = React.useState([{name: 'loading..', id: ''}])   \r\n    \r\n    \r\n    React.useEffect(() => {\r\n        \r\n        async function getDropdown(){\r\n            \r\n            const data1 = await getData.getLocationData();\r\n            const data2 = await getData.getTransporterData();\r\n            setLocations(data1); \r\n            setTransporters(data2)     \r\n        }  \r\n        getDropdown();                \r\n    },[])\r\n\r\n    \r\n    const complaintData = {\r\n        reportedBy: \"\",\r\n        reportedDate: \"\",\r\n        reportedLocation: \"\",\r\n        description: \"\",\r\n        vehicleNumber: \"\",\r\n        transporterName: \"\",\r\n        transporterCode: \"\",\r\n        comments: \"\",\r\n        imageUrl: []\r\n    }\r\n\r\n    let imageArray = [];\r\n    \r\n    const authorize = async() => {\r\n        const getAuthorizationStatus = await authService.validateUser();        \r\n        if(getAuthorizationStatus.message === \"OK\"){\r\n            const role = await authService.getCurrentUserPayload().type;\r\n            if(role === \"VIEWER\") alert(\"ONLY ADMINS CAN ACCESS\");\r\n            else props.history.push(\"/admin\")  \r\n        } else{\r\n            alert(\"Session Expired!\\nRe-Login\");\r\n            logout();\r\n        }    \r\n    }   \r\n\r\n    const logout = () => {\r\n        authService.logoutUser();\r\n        props.history.push(\"/login\")\r\n    }\r\n\r\n\r\n    const handleChange = (e) => {\r\n        imageArray.push(e.target.files[0]);\r\n\r\n        //preview image\r\n        // let reader = new FileReader();\r\n        // reader.onload = () => {\r\n        //     let output = document.getElementById(\"output_image\");\r\n        //     output.height = 300;\r\n        //     output.width = 300;\r\n        //     output.title = e.target.files[0].name\r\n        //     output.src = reader.result;\r\n        // }\r\n        // reader.readAsDataURL(e.target.files[0]);\r\n        \r\n    }\r\n\r\n    const upload = async() => {\r\n        let urlArray=[];\r\n        imageArray.forEach(async image => {\r\n            const uploadTask = storage.ref(`images/${image.name}`).put(image);    \r\n            uploadTask.on(\"state_changed\", ()=>{}, (err)=>{ console.error(err); },\r\n             async ()=>{\r\n                let downloadUrl = storage.ref(\"images\").child(image.name).getDownloadURL();\r\n                let url = await downloadUrl;\r\n                return resolve(url);\r\n             }\r\n            )        \r\n        });\r\n        const resolve = async (x)=> {\r\n            urlArray.push(x)\r\n            if(urlArray.length === imageArray.length){\r\n                complaintData.imageUrl = urlArray;\r\n                const flag = await uploadComplaint(complaintData); \r\n                if(flag.message===true) alert(\"Complaint Registered\");\r\n                else alert(\"Complaint failed to register\");                              \r\n            }\r\n        }\r\n    }\r\n\r\n    const handleClick =  async () => {\r\n        const getAuthorizationStatus = await authService.validateUser();\r\n        if(getAuthorizationStatus.message !== \"OK\") {\r\n            alert(\"Session Expired! Please ReLogin\")\r\n            logout();\r\n        } else if(complaintData.description===\"\"||complaintData.comments===\"\"||complaintData.reportedLocation===\"\"||complaintData.vehicleNumber===\"\"||imageArray.length===0){\r\n            alert(\"Fill in all required fields\")\r\n        }else {            \r\n            complaintData.reportedBy = await authService.getCurrentUserPayload().id;\r\n            complaintData.reportedDate = new Date();\r\n            await upload();  \r\n        }\r\n        \r\n    }\r\n\r\n    const viewComplaintsOnClick = async () => {\r\n        const getAuthorizationStatus = await authService.validateUser();\r\n        if(getAuthorizationStatus.message !== \"OK\") {\r\n            alert(\"Session Expired! Please ReLogin\")\r\n            logout();\r\n        } else {\r\n            props.history.push(\"/dashboard-view-complaints\")\r\n        }\r\n    }\r\n\r\n    return(\r\n            \r\n            <div class=\"min-h-screen flex flex-row bg-blue-50\">\r\n  <div class=\"flex flex-col w-56 bg-blue-500 rounded-r-3xl overflow-hidden shadow-2xl\">\r\n    <div class=\"flex items-center justify-center h-20 shadow-2xl bg-gray-50\">\r\n      <h1 class=\"text-3xl uppercase text-blue-500\">WELCOME</h1>\r\n    </div>\r\n    <ul class=\"flex flex-col py-4\">\r\n    <li>\r\n        <button onClick={()=>{props.history.push('/dashboard')}} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-white\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Dashboard</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={viewComplaintsOnClick} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">View Complaints</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={() => props.history.push(\"/report\")} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-music\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Report</span>\r\n        </button>\r\n      </li>\r\n      \r\n      <li>\r\n        <button onClick={authorize} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-shopping-bag\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Admin</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={logout} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-chat\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Logout</span>\r\n        </button>\r\n      </li>\r\n    </ul>\r\n    \r\n  </div>\r\n<div class=\"p-20  rounded flex justify-center items-center flex-col\">\r\n    <p class=\"mb-4 text-3xl uppercase text-blue-500\">Register Complaint : </p>\r\n<br />\r\n            <form>\r\n                <select class=\"bg-blue-200 text-blue-500 mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\" required onChange={(e) => complaintData.reportedLocation = e.target.value }>\r\n                 <option value=\"\" disabled selected>Reported Location</option>\r\n                     {\r\n                        \r\n                        Object.entries(locations).map( ele => (\r\n                            <option key={ele.name} value={ele[1].name}>{ele[1].name}</option>\r\n                        ))\r\n                                     \r\n                    }\r\n                </select>\r\n                <br /><br />\r\n                \r\n                <input type=\"text\" placeholder=\"Description\" required onChange={\r\n                    (e) => complaintData.description = e.target.value\r\n                } class=\"bg-blue-200 placeholder-blue-500 text-blue-500 mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"/> <br /><br />\r\n\r\n                <input type=\"text\" placeholder=\"Vehicle Number\" required onChange={\r\n                    (e) => complaintData.vehicleNumber = e.target.value\r\n                } class=\"bg-blue-200 placeholder-blue-500 text-blue-500 mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"/> <br /><br />\r\n\r\n                <select class=\"bg-blue-200 placeholder-blue-500 text-blue-500 mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\" onChange={(e) => {\r\n                    let str = e.target.value;\r\n                    complaintData.transporterName = str.substring(0,str.lastIndexOf(\"-\"));\r\n                    complaintData.transporterCode = str.substring(str.lastIndexOf(\"-\")+1);\r\n                } }>\r\n                    <option value=\"\" disabled selected>Transporter name-id</option>\r\n                    <option value=\"\">NIL</option>\r\n                    {                        \r\n                        Object.entries(transporters).map( ele => (\r\n                            \r\n                        <option key={ele.name} value={ele[1].name + \"-\" + ele[1].id}>{ele[1].name + \"-\" + ele[1].id}</option>\r\n                    ))}\r\n                </select>\r\n\r\n                <br /><br />\r\n                <input type=\"text\" placeholder=\"comments\" required onChange={\r\n                    (e) => complaintData.comments = e.target.value\r\n                } class=\"bg-blue-200 placeholder-blue-500 text-blue-500 mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"/><br /><br />\r\n                \r\n                <input id=\"file-input\" type=\"file\" accept=\"image/*\" multiple onChange={handleChange} required class=\"bg-blue-200 mb-5 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none placeholder-blue-500 text-blue-500\"/>\r\n                {/* <img id=\"output_image\" /> */}\r\n            </form>\r\n            <br />\r\n            <button \r\n            class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\"\r\n            onClick={handleClick}>Upload</button> \r\n            <br /> <br />\r\n</div>\r\n</div>\r\n    )    \r\n\r\n}\r\n\r\nexport default Dashboard;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authService from '../services/authService';\r\n\r\n\r\nexport const LoginRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={props => {\r\n        const currentUser = authService.getCurrentUser();\r\n\r\n        if (!currentUser) {\r\n            return <Component {...props} />\r\n            // not logged in so redirect to login page with the return url\r\n\r\n        }\r\n\r\n        // authorised so return component\r\n        return <Redirect to={{ pathname: '/dashboard', state: { from: props.location } }} />\r\n\r\n    }} />\r\n)","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authService from '../services/authService';\r\n\r\n\r\nexport const DashboardRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={props => {\r\n        const currentUser = authService.getCurrentUser();\r\n        // console.log(currentUser);\r\n        if (!currentUser) {\r\n            alert(\"Login to view\")\r\n            // not logged in so redirect to login page with the return url\r\n            return <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n        }\r\n\r\n        // authorised so return component\r\n        return <Component {...props} />\r\n    }} />\r\n)","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport authService from '../services/authService';\r\n\r\n\r\nexport const AdminRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={props => {\r\n        const currentUser = authService.getCurrentUser();\r\n\r\n\r\n        \r\n        if (!currentUser) {\r\n            alert(\"Login to view\")\r\n\r\n            return <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n        }\r\n        else {\r\n            let currentUserRole = authService.getCurrentUserPayload().type;\r\n            if(currentUserRole !== \"ADMIN\") {\r\n                alert(\"Only admins can view\")\r\n                return <Redirect to={{ pathname: '/dashboard', state: { from: props.location } }} />\r\n            } else  // authorised so return component\r\n            return <Component {...props} />            \r\n        }\r\n       \r\n    }} />\r\n)","import React from 'react';\r\nimport getData from '../services/getData';\r\nimport authService from '../services/authService';\r\n\r\nfunction Admin(props){\r\n    let query = {};  \r\n    let counter = 0;\r\n    const [locations, setLocations] = React.useState([{name: 'loading..'},{name: ''}]) \r\n    const [items, setItems] = React.useState([{name: \"\"}])\r\n\r\n    React.useEffect(() => {\r\n        async function getDropdown(){\r\n            const data1 = await getData.getLocationData();\r\n            setLocations(data1);\r\n        }\r\n        getDropdown();\r\n    },[]);\r\n\r\n    const viewComplaintsOnClick = async () => {\r\n        const getAuthorizationStatus = await authService.validateUser();\r\n        if(getAuthorizationStatus.message !== \"OK\") {\r\n            alert(\"Session Expired! Please ReLogin\")\r\n            logout();\r\n        } else {\r\n            props.history.push(\"/dashboard-view-complaints\")\r\n        }\r\n    }\r\n    const authorize = async() => {\r\n        const getAuthorizationStatus = await authService.validateUser();        \r\n        if(getAuthorizationStatus.message === \"OK\"){\r\n            const role = await authService.getCurrentUserPayload().type;\r\n            if(role === \"VIEWER\") alert(\"ONLY ADMINS CAN ACCESS\");\r\n            else props.history.push(\"/admin\")  \r\n        } else{\r\n            alert(\"Session Expired!\\nRe-Login\");\r\n            logout();\r\n        }    \r\n    } \r\n\r\n    const logout = () => {\r\n        authService.logoutUser();\r\n        props.history.push(\"/login\")\r\n    }\r\n       \r\n    const handleClick = async () => {\r\n        await authorize();\r\n        const data = await getData.getComplaintDataAdmin(query);\r\n        if(data.length===0){ alert(\"no complaints found\"); window.location.reload();}\r\n        else setItems(data)\r\n              \r\n    }\r\n    const url = (x) => {   \r\n        let y = JSON.stringify(x) ;   \r\n        let z = String(y)\r\n        let w = z.split('\"');\r\n        let arr = [];\r\n        for(let i=0;i<w.length;i++){\r\n            if(i%2===1) { arr.push({j:w[i]}); }\r\n        }    \r\n        let urlCounter = 1;        \r\n                            \r\n        return (\r\n            <div>\r\n                {arr.map(ele => (\r\n                    <a class=\"no-underline hover:underline text-red-500\" href={ele.j}>Link {urlCounter++}<br/></a>                    \r\n                    // <img src={ele.j} alt=\"\" width=\"100\" height=\"100\"/>                    \r\n                ))}\r\n                \r\n            </div>\r\n        )\r\n    }\r\n    const checkStatus = (x,y) => {\r\n        if(x===\"OPEN\") {\r\n            return (\r\n                <div class=\"bg-yellow-200 border rounded\">\r\n                    <p class=\"text--500 font-semibold\">\r\n                    &nbsp; Status : {x} <br />\r\n                    &nbsp;&nbsp;Remarks : {y}\r\n                    </p>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return(\r\n                <div class=\"bg-green-200 border rounded\">\r\n                    <p class=\"text-gr00 font-semibold\">\r\n                        &nbsp; Status : {x} <br />\r\n                        &nbsp;&nbsp;Remarks : {y}\r\n                    </p>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n    return(\r\n\r\n        <div class=\"min-h-screen flex flex-row bg-blue-50\">\r\n  <div class=\"flex flex-col w-56 bg-blue-500 rounded-r-3xl overflow-hidden shadow-2xl\">\r\n    <div class=\"flex items-center justify-center h-20 shadow-2xl bg-gray-50\">\r\n      <h1 class=\"text-3xl uppercase text-blue-500\">WELCOME</h1>\r\n    </div>\r\n    <ul class=\"flex flex-col py-4\">\r\n    <li>\r\n        <button onClick={()=>{props.history.push('/dashboard')}} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Dashboard</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={viewComplaintsOnClick} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">View Complaints</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={() => props.history.push(\"/report\")} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-music\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Report</span>\r\n        </button>\r\n      </li>\r\n      \r\n      <li>\r\n        <button onClick={authorize} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-shopping-bag\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Admin</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={logout} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-chat\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Logout</span>\r\n        </button>\r\n      </li>\r\n    </ul>\r\n    \r\n  </div>\r\n<div class=\"p-10 rounded flex justify-center items-center flex-col \">\r\n<div class=\"mb-4 text-3xl uppercase text-blue-500\" >ADMIN</div>\r\n            <p>Search and Edit Complaints</p>\r\n            <br /> \r\n            <input class=\"bg-blue-200 text-blue-500 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"\r\n            type=\"text\" placeholder=\"Search by ID\" onChange={e=>query.reportedBy = (e.target.value)}/>\r\n           <br />\r\n           \r\n            <select class=\"bg-blue-200 text-blue-500 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"\r\n            onChange={e => query.reportedLocation = (e.target.value)}>\r\n                <option value=\"\" disabled selected>Choose a location</option>\r\n                <option value=\"\" >ANY</option>\r\n                {\r\n                    Object.entries(locations).map( ele => (\r\n                        <option value={ele[1].name}>{ele[1].name}</option>\r\n                    ))\r\n                }\r\n            </select>                            \r\n\r\n            <br />\r\n\r\n            <select class=\"bg-blue-200 text-blue-500 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"\r\n            onChange={e=>query.status = (e.target.value)}>\r\n                <option value=\"\" disabled selected>Choose a Complaint Status</option>\r\n                <option value=\"\" >ANY</option>\r\n                <option value=\"OPEN\">OPEN</option>\r\n                <option value=\"CLOSED\">CLOSED</option>\r\n            </select>\r\n            <br />\r\n\r\n            <button class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\"\r\n            type=\"submit\" onClick={handleClick}>Go</button>  \r\n            <br /><br />\r\n            \r\n            <div>\r\n                {items.map(item => (\r\n                    <div class=\"space-y-4 space-x-4 max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl\">\r\n                        <div class=\"md:flex space-x-4\">\r\n                            <div class=\"p-8 space-x-4\">\r\n                                \r\n                            \r\n                        <p class=\"uppercase tracking-wide text-sm text-blue-700 font-semibold\">\r\n                        Complaint {++counter}:\r\n                        </p>\r\n                        <p class=\"mt-2 text-blue-500\">\r\n                            Complaint ID : {item._id}  <br />\r\n                            Reported By : {item.reportedBy} <br />\r\n                            Description : {item.description} <br />\r\n                            {/* Image Url : <a href={item.imageUrl}>url</a> <br /> */}\r\n                            Reported Location : {item.reportedLocation} <br />\r\n                            Vehicle Number : {item.vehicleNumber} <br />\r\n                            Transporter Name <i>(optional)</i> : {item.transporterName} <br />\r\n                            Transporter Code <i>(optional)</i> : {item.transporterCode} <br />\r\n                            Created On : {item.createdOn} <br />\r\n                            Comments : {item.comments} <br />\r\n                            Image URLs : <br/>\r\n                            {url(item.imageUrl)}\r\n                            \r\n                            {\r\n                                checkStatus(item.status,item.remarks)\r\n                            }\r\n                            <br /> \r\n                            <button class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\"\r\n                            onClick={() => {if(typeof(item._id)!==\"undefined\"){localStorage.setItem(\"complaintId\",item._id); props.history.push(\"/edit-complaint\")}}}>Edit Complaint</button> <br /> <br />\r\n                            \r\n                            \r\n                        </p>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>   \r\n    \r\n</div>\r\n</div>\r\n        \r\n        \r\n    )\r\n}\r\n\r\nexport default Admin;","import authService from '../services/authService';\r\nimport React from 'react';\r\nimport getData from '../services/getData';\r\nimport ReactDOM from 'react-dom';\r\n\r\nfunction ComplaintView(props){\r\n    let flag = \"ALL\";\r\n    const [items, setItems] = React.useState([{name: \"\"}])\r\n    let counter = 0;\r\n\r\n    const viewComplaintsOnClick = async () => {\r\n        const getAuthorizationStatus = await authService.validateUser();\r\n        if(getAuthorizationStatus.message !== \"OK\") {\r\n            alert(\"Session Expired! Please ReLogin\")\r\n            logout();\r\n        } else {\r\n            props.history.push(\"/dashboard-view-complaints\")\r\n        }\r\n    }\r\n\r\n    const display = async() => {\r\n        const getAuthorizationStatus = await authService.validateUser();\r\n        if(getAuthorizationStatus.message === \"OK\"){\r\n            const data = await getData.getComplaintData(flag);\r\n            if(data.length === 0 ) alert(\"No Complaints Found\")\r\n            setItems(data)\r\n            \r\n        } else alert(\"Session Expired! Please Login\")\r\n    }\r\n\r\n    const checkStatus = (x,y) => {\r\n        if(x===\"OPEN\") {\r\n            return (\r\n                <div class=\"bg-yellow-200 border rounded\">\r\n                    <p class=\"text--500 font-semibold\">\r\n                    &nbsp; Status : {x} <br />\r\n                    &nbsp;&nbsp;Remarks : {y}\r\n                    </p>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return(\r\n                <div class=\"bg-green-200 border rounded\">\r\n                    <p class=\"text-gr00 font-semibold\">\r\n                        &nbsp; Status : {x} <br />\r\n                        &nbsp;&nbsp;Remarks : {y}\r\n                    </p>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n    const authorize = async() => {\r\n        const getAuthorizationStatus = await authService.validateUser();        \r\n        if(getAuthorizationStatus.message === \"OK\"){\r\n            const role = await authService.getCurrentUserPayload().type;\r\n            if(role === \"VIEWER\") alert(\"ONLY ADMINS CAN ACCESS\");\r\n            else props.history.push(\"/admin\")  \r\n        } else{\r\n            alert(\"Session Expired!\\nRe-Login\");\r\n            logout();\r\n        }    \r\n    } \r\n\r\n    const logout = () => {\r\n        authService.logoutUser();\r\n        props.history.push(\"/login\")\r\n    }\r\n    \r\n    const url = (x) => {   \r\n        let y = JSON.stringify(x) ;   \r\n        let z = String(y)\r\n        let w = z.split('\"');\r\n        let arr = [];\r\n        for(let i=0;i<w.length;i++){\r\n            if(i%2===1) { arr.push({j:w[i]}); }\r\n        }    \r\n        console.log(arr);\r\n        let urlCounter = 1;        \r\n                            \r\n        return (\r\n            <div>\r\n                {arr.map(ele => (\r\n                    <a class=\"no-underline hover:underline text-red-500\" href={ele.j}>Link {urlCounter++}<br/></a>                    \r\n                    // <img src={ele.j} alt=\"\" width=\"100\" height=\"100\"/>\r\n                    \r\n                ))}\r\n                \r\n            </div>\r\n        )\r\n    }\r\n    \r\n\r\n    return(\r\n        <div class=\"min-h-screen flex flex-row bg-blue-50\">\r\n  <div class=\"flex flex-col w-56 bg-blue-500 rounded-r-3xl overflow-hidden shadow-2xl\">\r\n    <div class=\"flex items-center justify-center h-20 shadow-2xl bg-gray-50\">\r\n      <h1 class=\"text-3xl uppercase text-blue-500\">WELCOME</h1>\r\n    </div>\r\n    <ul class=\"flex flex-col py-4\">\r\n    <li>\r\n        <button onClick={()=>{props.history.push('/dashboard')}} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-white\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Dashboard</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={viewComplaintsOnClick} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-white\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">View Complaints</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={() => props.history.push(\"/report\")} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-music\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Report</span>\r\n        </button>\r\n      </li>\r\n      \r\n      <li>\r\n        <button onClick={authorize} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-shopping-bag\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Admin</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={logout} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-chat\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Logout</span>\r\n        </button>\r\n      </li>\r\n    </ul>\r\n    \r\n  </div>\r\n<div class=\"p-20  rounded flex justify-center items-center flex-col \">\r\n<div class=\"mb-4 text-3xl uppercase text-blue-500\" >View Complaints</div>\r\n\r\n            <select onChange={(e) => flag = e.target.value} class=\"bg-blue-200 text-blue-500 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\">\r\n                <option value=\"\" disabled selected>Select Query</option>\r\n                <option value=\"ALL\">List All</option>\r\n                <option value=\"OPEN\">Open</option>\r\n                <option value=\"CLOSED\">Closed</option>\r\n            </select>\r\n            <div>\r\n                <br />\r\n            <button onClick={display} class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\">display</button>\r\n            <br />\r\n            </div>\r\n\r\n  \r\n            \r\n            <div>\r\n            \r\n                {items.map(item => (\r\n                    <div class=\"space-y-4 space-x-4 max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl\">\r\n                    <div class=\"md:flex space-x-4\">\r\n                        <div class=\"p-8 space-x-4\">\r\n                        <p class=\"uppercase tracking-wide text-sm text-blue-700 font-semibold\">\r\n                        Complaint {++counter}: <br />\r\n                        </p>\r\n                            <p class=\"mt-2 text-blue-500\">\r\n                            Description : {item.description} <br />\r\n                            {/* Image Url : <a href={item.imageUrl}>url</a> <br /> */}\r\n                            Reported Location : {item.reportedLocation} <br />\r\n                            Vehicle Number : {item.vehicleNumber} <br />\r\n                            Transporter Name <i>(optional)</i> : {item.transporterName} <br />\r\n                            Transporter Code <i>(optional)</i> : {item.transporterCode} <br />\r\n                            Created On : {item.createdOn} <br />\r\n                            Comments : {item.comments} <br />\r\n                            Image URLs : <br/>\r\n                            {url(item.imageUrl)}\r\n                            {\r\n                                checkStatus(item.status,item.remarks)\r\n                            }\r\n                            \r\n                                                   \r\n                         \r\n                        </p>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    \r\n                    </div>\r\n                ))}\r\n                <br /><br />\r\n            </div>\r\n            \r\n    \r\n</div>\r\n</div>\r\n        \r\n\r\n        \r\n    )\r\n}\r\n\r\nexport default ComplaintView;","import authService from \"./authService\";\r\n\r\nconst changeData = async (flag) => {\r\n    return fetch('/update_complaint_data',{\r\n        method: \"POST\",\r\n        body: JSON.stringify(flag),\r\n        headers: {\r\n            \"x-access-token\": authService.authHeader(),\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n     .then(response => { return response.json() })\r\n     .then(myJson => { return myJson })\r\n}\r\n\r\nexport default changeData;","import getData from '../services/getData';\r\nimport updateComplaint from '../services/editComplaint';\r\nimport React from 'react';\r\n\r\nfunction EditComplaint(props) {\r\n    let complaintId = {};\r\n        \r\n    const [newStatus, setNewStatus] = React.useState(\"\");\r\n    const [newRemarks, setNewRemarks] = React.useState(\"\");\r\n    const [items, setItems] = React.useState([{name: \"\"}])\r\n\r\n    React.useEffect(()=>{        \r\n       \r\n       complaintId._id = localStorage.getItem(\"complaintId\");\r\n       localStorage.removeItem(\"complaintId\")  \r\n       getComplaint();            \r\n    },[]);\r\n    \r\n    const editComplaint = async () => {\r\n        if(newRemarks!==\"\" && newStatus!==\"\"){\r\n            let sendData = {\r\n                _id: complaintId._id,\r\n                remarks: newRemarks,\r\n                status: newStatus\r\n            };\r\n            console.log(sendData);\r\n            const flag = await updateComplaint(sendData);\r\n            if(flag.message === true) { \r\n                alert(\"Complaint updated\");\r\n                props.history.push(\"/admin\")\r\n            }\r\n            else alert(\"Some error occured\\nPlease try again after sometime\")\r\n        } else alert (\"enter all fields\")\r\n        \r\n\r\n    }\r\n    const getComplaint = async() => {\r\n        const data = await getData.getComplaintDataAdmin(complaintId);   \r\n        setItems(data);\r\n    }\r\n\r\n    const url = (x) => {   \r\n        let y = JSON.stringify(x) ;   \r\n        let z = String(y)\r\n        let w = z.split('\"');\r\n        let arr = [];\r\n        for(let i=0;i<w.length;i++){\r\n            if(i%2===1) { arr.push({j:w[i]}); }\r\n        }    \r\n        let urlCounter = 1;        \r\n                            \r\n        return (\r\n            <div>\r\n                {arr.map(ele => (\r\n                    <a class=\"no-underline hover:underline text-red-500\" href={ele.j}>Link {urlCounter++}<br/></a>                    \r\n                    // <img src={ele.j} alt=\"\" width=\"100\" height=\"100\"/>                    \r\n                ))}\r\n                \r\n            </div>\r\n        )\r\n    }\r\n\r\n    const checkStatus = (x,y) => {\r\n        if(x===\"OPEN\") {\r\n            return (\r\n                <div class=\"bg-yellow-200 border rounded\">\r\n                    <p class=\"text--500 font-semibold\">\r\n                    &nbsp; Status : {x} <br />\r\n                    &nbsp;&nbsp;Remarks : {y}\r\n                    </p>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return(\r\n                <div class=\"bg-green-200 border rounded\">\r\n                    <p class=\"text-gr00 font-semibold\">\r\n                        &nbsp; Status : {x} <br />\r\n                        &nbsp;&nbsp;Remarks : {y}\r\n                    </p>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n    return(\r\n        <div class=\"min-h-screen flex flex-row bg-blue-50\">\r\n        <div class=\"p-10 rounded flex justify-center items-center flex-col \">\r\n        <div class=\"text-3xl uppercase text-blue-500\" >Edit Complaint</div>\r\n            <div>\r\n                <div>  \r\n                {items.map(item => (\r\n                    <div class=\"space-y-4 space-x-4 max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl\">\r\n                        <div class=\"md:flex space-x-4\">\r\n                            <div class=\"p-8 space-x-4\">\r\n\r\n                            <p class=\"uppercase tracking-wide text-sm text-indigo-500 font-bold\">\r\n                            complaint Id = {complaintId._id = item._id} <br />\r\n                            \r\n                            </p>\r\n                        <p class=\"mt-2 text-blue-500\">\r\n                            Reported By : {item.reportedBy} <br />\r\n                            Description : {item.description} <br />\r\n                            Reported Location : {item.reportedLocation} <br />\r\n                            Vehicle Number : {item.vehicleNumber} <br />\r\n                            Transporter Name <i>(optional)</i> : {item.transporterName} <br />\r\n                            Transporter Code <i>(optional)</i> : {item.transporterCode} <br />\r\n                            Created On : {item.createdOn} <br />\r\n                            Comments : {item.comments} <br />\r\n                            Image URLs : <br/>\r\n                            {url(item.imageUrl)}\r\n    \r\n                            {\r\n                                checkStatus(item.status,item.remarks)\r\n                            }                          \r\n                            \r\n                        </p>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n                \r\n            </div>   \r\n            <br />\r\n\r\n            <input class=\"bg-blue-200 text-blue-500 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"\r\n             placeholder=\"ADD REMARKS\" type=\"text\" required onChange={e => setNewRemarks(e.target.value)}/> &nbsp;\r\n              &nbsp;&nbsp;\r\n            <select onChange={e => setNewStatus(e.target.value)} required\r\n            class=\"bg-blue-200 text-blue-500 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\">\r\n                <option value=\"\" disabled selected>Choose a status</option>\r\n                <option value=\"OPEN\">OPEN</option>\r\n                <option value=\"CLOSED\">CLOSED</option>\r\n            </select>    &nbsp;&nbsp;&nbsp;\r\n            <button class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\"\r\n            type = \"submit\" onClick={editComplaint}>Edit Complaint</button>\r\n\r\n            \r\n                \r\n            </div> <br />\r\n            \r\n\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditComplaint;","import authService from \"./authService\";\r\n\r\nconst getReportData = (flag) => {\r\n    return fetch(\"/report\",{\r\n        method: \"POST\",\r\n        body: JSON.stringify(flag),\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"x-access-token\" : authService.authHeader()\r\n        }\r\n    })\r\n     .then(response => { return response.json() })\r\n     .then(myJson => { return myJson });\r\n}\r\n\r\nconst obj = {\r\n    getReportData\r\n}\r\n\r\nexport default obj;","import React from \"react\";\r\nimport getData from \"../services/getReport\";\r\nimport { CSVLink } from 'react-csv';\r\nimport authService from \"../services/authService\";\r\n\r\nfunction Report(props) {\r\n    const [fromDate,setFromDate] = React.useState(\"\");\r\n    const [toDate,setToDate] = React.useState(\"\");\r\n    const [data, setData] = React.useState([]);\r\n\r\n    const headers = [\r\n        { label: \"Created On\", key: \"createdOn\"},\r\n        { label: \"Status\", key: \"status\"},\r\n        { label: \"Remarks\", key: \"remarks\"},\r\n        { label: \"Reported By\", key: \"reportedBy\"},\r\n        { label: \"Reported Location\", key: \"reportedLocation\"},\r\n        { label: \"Description\", key: \"description\"},\r\n        { label: \"Vehicle Number\", key: \"vehicleNumber\"},\r\n        { label: \"Transporter Name\", key: \"transporterName\"},\r\n        { label: \"Transporter Code\", key: \"transporterCode\"},\r\n        { label: \"Comments\", key: \"comments\"}\r\n    ];\r\n\r\n    const csvReport = {\r\n        data: data,\r\n        headers: headers,\r\n        filename: \"Report.csv\"\r\n    }\r\n    \r\n    const authorize = async() => {\r\n        const getAuthorizationStatus = await authService.validateUser();        \r\n        if(getAuthorizationStatus.message === \"OK\"){\r\n            const role = await authService.getCurrentUserPayload().type;\r\n            if(role === \"VIEWER\") alert(\"ONLY ADMINS CAN ACCESS\");\r\n            else props.history.push(\"/admin\")  \r\n        } else{\r\n            alert(\"Session Expired!\\nRe-Login\");\r\n            logout();\r\n        }    \r\n    }   \r\n\r\n    const logout = () => {\r\n        authService.logoutUser();\r\n        props.history.push(\"/login\")\r\n    }\r\n\r\n    const viewComplaintsOnClick = async () => {\r\n        const getAuthorizationStatus = await authService.validateUser();\r\n        if(getAuthorizationStatus.message !== \"OK\") {\r\n            alert(\"Session Expired! Please ReLogin\")\r\n            logout();\r\n        } else {\r\n            props.history.push(\"/dashboard-view-complaints\")\r\n        }\r\n    }\r\n\r\n    const checkFunction = () => {\r\n\r\n        if(data.length!==0) {\r\n            return (\r\n                <div>\r\n                    <br />\r\n                    <CSVLink {...csvReport} class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\">Download Report</CSVLink>\r\n                </div>\r\n            )\r\n        }     \r\n    }    \r\n\r\n    \r\n    const getReport = async() => {        \r\n        const complaints = await getData.getReportData({from: fromDate, to: toDate});  \r\n        console.log(complaints); \r\n        if(complaints.length===0) alert(\"check the dates entered\") \r\n        else alert(\"Report generated. Download the report by clicking the link\")\r\n        setData(complaints);                           \r\n    }\r\n\r\n    return(\r\n        <div class=\"min-h-screen flex flex-row bg-blue-50\">\r\n  <div class=\"flex flex-col w-56 bg-blue-500 rounded-r-3xl overflow-hidden shadow-2xl\">\r\n    <div class=\"flex items-center justify-center h-20 shadow-2xl bg-gray-50\">\r\n      <h1 class=\"text-3xl uppercase text-blue-500\">WELCOME</h1>\r\n    </div>\r\n    <ul class=\"flex flex-col py-4\">\r\n    <li>\r\n        <button onClick={()=>{props.history.push('/dashboard')}} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Dashboard</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={viewComplaintsOnClick} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-home\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">View Complaints</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={() => props.history.push(\"/report\")} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-music\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Report</span>\r\n        </button>\r\n      </li>\r\n      \r\n      <li>\r\n        <button onClick={authorize} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-shopping-bag\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Admin</span>\r\n        </button>\r\n      </li>\r\n      <li>\r\n        <button onClick={logout} class=\"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800\">\r\n          <span class=\"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400\"><i class=\"bx bx-chat\"></i></span>\r\n          <span class=\"text-sm font-medium text-gray-50\">Logout</span>\r\n        </button>\r\n      </li>\r\n    </ul>\r\n    \r\n  </div>\r\n<div class=\"p-20  rounded flex justify-center items-center flex-col \">\r\n<div>\r\n<div class=\"mb-4 text-3xl uppercase text-blue-500\" >report</div>\r\n            \r\n            <br />\r\n            Complaint Logged Date Range <br /><br />\r\n            From: &nbsp;<input type=\"date\"  onChange={(e) => setFromDate(e.target.value)} class=\"text-blue-500 bg-blue-200 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"/> <br /><br />\r\n            To: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=\"date\" onChange={(e) => setToDate(e.target.value)} class=\"text-blue-500 bg-blue-200 p-3 w-80 focus:border-blue-700 rounded border-2 outline-none\"/>\r\n            <br /><br />\r\n            <button class=\"bg-blue-500 hover:bg-blue-700 text-gray-50 font-bold py-2 px-4 border border-white rounded\" onClick={getReport}>Generate Report</button>\r\n            {checkFunction()}\r\n            <br /><br />\r\n\r\n\r\n            \r\n        </div>\r\n   \r\n</div>\r\n</div>\r\n        \r\n    )\r\n\r\n}\r\n\r\nexport default Report;","import React from 'react';\nimport './App.css';\nimport {BrowserRouter as Router, Link, NavLink, Switch, Route, Redirect} from 'react-router-dom';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport Dashboard from './pages/Dashboard';\nimport { LoginRoute } from './components/LoginRoute';\nimport { DashboardRoute } from './components/DashboardRoute';\nimport { AdminRoute } from './components/AdminRoute';\nimport Admin from './pages/Admin';\nimport ComplaintViewDashboard from './pages/Complaint-View-Dashboard';\nimport EditComplaint from './pages/Edit-Complaint';\nimport Report from './pages/Report';\n\nfunction App() {\n  return (\n    <div>\n      <Router>\n      \n      \n      <Switch>\n        <Route exact path=\"/register\" component={Register}></Route>\n        <LoginRoute exact path=\"/login\" component={Login}></LoginRoute>\n        <DashboardRoute path=\"/dashboard\" component={Dashboard}></DashboardRoute>\n        <AdminRoute path=\"/admin\" component={Admin}></AdminRoute>\n        <DashboardRoute path=\"/dashboard-view-complaints\" component={ComplaintViewDashboard}></DashboardRoute>\n        <AdminRoute path=\"/edit-complaint\" component={EditComplaint}></AdminRoute>\n        <DashboardRoute path=\"/report\" component={Report}></DashboardRoute>\n\n      </Switch>\n\n      </Router>\n             \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}